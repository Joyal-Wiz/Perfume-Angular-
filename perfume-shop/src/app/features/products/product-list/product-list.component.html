<div class="filters-container">

  <!-- SEARCH -->
  <input 
    type="text"
    class="search-input"
    placeholder="Search perfumes..."
    [(ngModel)]="searchText"
    (input)="applyFilters()"
  >

  <!-- CATEGORY FILTER -->
  <select [(ngModel)]="selectedCategory" (change)="applyFilters()">
    <option value="All">All Categories</option>
    <option value="Men">Men</option>
    <option value="Women">Women</option>
    <option value="Unisex">Unisex</option>
    <option value="Oud">Oud</option>
    <option value="Fresh">Fresh</option>
    <option value="Luxury">Luxury</option>
  </select>

  <!-- BRAND FILTER -->
  <select [(ngModel)]="selectedBrand" (change)="applyFilters()">
    <option value="All">All Brands</option>
    <option *ngFor="let b of brands" [value]="b">{{ b }}</option>
  </select>

  <!-- PRICE RANGE -->
  <div class="price-range">
    <label>Max Price: ₹{{ maxPrice }}</label>
    <input type="range" min="50" max="300" [(ngModel)]="maxPrice" (input)="applyFilters()">
  </div>

</div>


<!-- PRODUCT GRID -->
<div class="product-grid">

  <div class="card" *ngFor="let p of paginatedProducts">

    <!-- DISCOUNT BADGE -->
    <div class="discount-badge" *ngIf="p.discount">
      {{ p.discount }}% OFF
    </div>

    <!-- CLICKABLE AREA = PRODUCT DETAILS -->
    <div class="click-area" [routerLink]="['/products/details', p.id]">
      <img [src]="p.image" class="image">

      <h3 class="title">{{ p.name }}</h3>
      <p class="brand">{{ p.brand }}</p>

      <div class="price-box">
        <span class="price">
          ₹{{ (p.price - (p.price * p.discount / 100)).toFixed(2) }}
        </span>

        <span class="old-price" *ngIf="p.discount">
          ₹{{ p.price }}
        </span>
      </div>

      <p class="stock" [class.low]="p.stock <= 3">
        Stock: {{ p.stock }}
      </p>
    </div>

    <!-- ADD TO CART BUTTON -->
    <button 
      class="add-btn"
      [disabled]="p.stock === 0"
      (click)="addProduct(p); $event.stopPropagation()"
    >
      {{ p.stock === 0 ? 'Out of Stock' : 'Add to Cart' }}
    </button>

  </div>

</div>


<!-- PAGINATION -->
<div class="pagination">
  <button (click)="prevPage()" [disabled]="page === 1">Prev</button>
  <span>Page {{ page }} / {{ totalPages }}</span>
  <button (click)="nextPage()" [disabled]="page === totalPages">Next</button>
</div>
