<!-- HTML Template -->
<div class="details-container" *ngIf="product">

  <!-- LEFT: IMAGE SECTION -->
  <div class="left">
    <div class="image-wrapper">
      <div class="offer-badge" *ngIf="product.discount">
        <span class="badge-text">-{{ product.discount }}%</span>
        <span class="badge-subtext">OFF</span>
      </div>

      <div class="image-glow"></div>
      <img [src]="product.image" class="main-image" alt="product-image">
      
      
      <div class="floating-elements">
        <div class="float-circle circle-1"></div>
        <div class="float-circle circle-2"></div>
        <div class="float-circle circle-3"></div>
      </div>
    </div>
  </div>

  <!-- RIGHT: PRODUCT INFO -->
<div class="right" *ngIf="!editMode">


    <!-- BRAND TAG -->
    <div class="brand-tag">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M20 7h-9M14 3v4M6 21V10a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v11"/>
      </svg>
      {{ product.brand }}
    </div>

    <!-- TITLE WITH GRADIENT -->
    <h1 class="title">{{ product.name }}</h1>

    <!-- CATEGORY CHIP & RATING -->
    <div class="category-rating-row">
      <div class="category-chip">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="3" width="7" height="7"/>
          <rect x="14" y="3" width="7" height="7"/>
          <rect x="14" y="14" width="7" height="7"/>
          <rect x="3" y="14" width="7" height="7"/>
        </svg>
        {{ product.category }}
      </div>

      <!-- Star Rating -->
      <div class="rating-display">
        <div class="stars">
          <span class="star filled">â˜…</span>
          <span class="star filled">â˜…</span>
          <span class="star filled">â˜…</span>
          <span class="star filled">â˜…</span>
          <span class="star half">â˜…</span>
        </div>
        <span class="rating-text">4.5 (234 reviews)</span>
      </div>
    </div>

    <!-- PRICE SECTION -->
    <div class="price-section">
      <div class="price-wrapper">
        <span class="currency">â‚¹</span>
        <span class="price">{{ (product.price - (product.price * product.discount / 100)).toFixed(2) }}</span>
      </div>
      
      <div class="price-details" *ngIf="product.discount">
        <span class="old-price">â‚¹{{ product.price }}</span>
        <span class="save-badge">Save â‚¹{{ (product.price * product.discount / 100).toFixed(2) }}</span>
      </div>
    </div>

    <!-- DESCRIPTION -->
    <div class="description-card">
      <div class="desc-header">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
          <polyline points="14 2 14 8 20 8"/>
        </svg>
        <h3>Product Description</h3>
      </div>
      <p class="desc-text">
        Indulge in the luxurious aroma of <strong>{{ product.name }}</strong>.
        Crafted with premium notes and long-lasting fragrance, this perfume is
        perfect for any occasion â€” day or night.
      </p>
    </div>

    <!-- Key Features -->
    <div class="features-grid" *ngIf="!isAdmin()">
      <div class="feature-item">
        <div class="feature-icon">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 2v20M2 12h20"/>
          </svg>
        </div>
        <div class="feature-content">
          <span class="feature-title">Premium Quality</span>
          <span class="feature-desc">Authentic ingredients</span>
        </div>
      </div>

      <div class="feature-item">
        <div class="feature-icon">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <polyline points="12 6 12 12 16 14"/>
          </svg>
        </div>
        <div class="feature-content">
          <span class="feature-title">Long Lasting</span>
          <span class="feature-desc">8-12 hours wear</span>
        </div>
      </div>

      <div class="feature-item">
        <div class="feature-icon">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
            <circle cx="12" cy="10" r="3"/>
          </svg>
        </div>
        <div class="feature-content">
          <span class="feature-title">Unique Scent</span>
          <span class="feature-desc">Signature blend</span>
        </div>
      </div>

      <div class="feature-item">
        <div class="feature-icon">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
            <polyline points="22 4 12 14.01 9 11.01"/>
          </svg>
        </div>
        <div class="feature-content">
          <span class="feature-title">Cruelty Free</span>
          <span class="feature-desc">Not tested on animals</span>
        </div>
      </div>
    </div>

    <!-- SPECIAL OFFER BANNER -->
    <div class="special-offer" *ngIf="product.discount > 0 && !isAdmin()">
>
      <div class="offer-icon">âš¡</div>
      <div class="offer-content">
        <strong>Limited Time Offer</strong>
        <p>Save {{ product.discount }}% on this exclusive item</p>
      </div>
      <div class="offer-pattern"></div>
    </div>

    <!-- STOCK INDICATOR -->
    <div class="stock-section">
      <div class="stock-indicator" [class.low-stock]="product.stock > 0 && product.stock < 5" [class.out-of-stock]="product.stock === 0">
        <div class="stock-dot"></div>
        <span class="stock-text">
          {{ product.stock === 0 ? "Out of Stock" : product.stock < 5 ? "Only " + product.stock + " left!" : product.stock + " items available" }}
        </span>
      </div>
    </div>

    <!-- ACTION BUTTONS -->
    <div class="action-buttons">
      <button 
        class="add-btn"
        [disabled]="product.stock === 0"
        (click)="addToCart()"
         *ngIf="role !== 'admin'"
      >
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="9" cy="21" r="1"/>
          <circle cx="20" cy="21" r="1"/>
          <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
        </svg>
        Add to Cart
      </button>

      <button 
        class="buy-btn"
        [disabled]="product.stock === 0"
        (click)="buyNow()"
         *ngIf="role !== 'admin'"
      >
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M5 12h14M12 5l7 7-7 7"/>
        </svg>
        Buy Now
      </button>
    </div>
    <!-- admin -->

    <div *ngIf="role === 'admin'" class="admin-actions">
<button class="edit-btn" (click)="enableEdit()">Edit</button>
<button class="delete-btn" (click)="showDeleteConfirm = true">ðŸ—‘ Delete</button>

</div>












    <!-- Quantity Selector & Compare -->
    <div class="quantity-compare-row" *ngIf="!isAdmin()">
      <div class="quantity-selector">
        <button class="qty-btn" >âˆ’</button>
        <input type="number" class="qty-input" value="1" min="1" readonly>
        <button class="qty-btn" >+</button>
      </div>

      <button class="compare-btn" >
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="17 11 12 6 7 11"/>
          <polyline points="17 18 12 13 7 18"/>
        </svg>
        Compare
      </button>
    </div>

    <!-- TRUST BADGES -->
    <div class="trust-badges" *ngIf="!isAdmin()">
      <div class="badge-item">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
        </svg>
        <span>Secure Payment</span>
      </div>
      <div class="badge-item" >
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="1" y="4" width="22" height="16" rx="2" ry="2"/>
          <line x1="1" y1="10" x2="23" y2="10"/>
        </svg>
        <span>Easy Returns</span>
      </div>
      <div class="badge-item">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
          <circle cx="8.5" cy="7" r="4"/>
          <polyline points="17 11 19 13 23 9"/>
        </svg>
        <span>Verified Product</span>
      </div>
    </div>

    <!-- Delivery Info Card -->
    <div class="delivery-info-card" *ngIf="!isAdmin()">
      <div class="delivery-header">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="1" y="3" width="15" height="13"/>
          <polygon points="16 8 20 8 23 11 23 16 16 16 16 8"/>
          <circle cx="5.5" cy="18.5" r="2.5"/>
          <circle cx="18.5" cy="18.5" r="2.5"/>
        </svg>
        <h4>Delivery & Returns</h4>
      </div>
      <div class="delivery-options">
        <div class="delivery-option">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="20 6 9 17 4 12"/>
          </svg>
          <span>Free delivery on orders above â‚¹499</span>
        </div>
        <div class="delivery-option">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="20 6 9 17 4 12"/>
          </svg>
          <span>Expected delivery: 3-5 business days</span>
        </div>
        <div class="delivery-option">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="20 6 9 17 4 12"/>
          </svg>
          <span>30-day easy return policy</span>
        </div>
      </div>
    </div>

  </div>
</div>

<!-- admin -->
<app-confirmation-modal
  *ngIf="showDeleteConfirm"
  message="Are you sure you want to delete this product?"
  (confirm)="deleteProduct()"
  (cancel)="showDeleteConfirm = false">
</app-confirmation-modal>



<div class="right" *ngIf="editMode">
  
  <div class="edit-form">

    <h3>Edit Product</h3>

    <label>Name</label>
    <input [(ngModel)]="product.name" />

    <label>Brand</label>
    <input [(ngModel)]="product.brand" />

    <label>Category</label>
    <input [(ngModel)]="product.category" />

    <label>Price</label>
    <input type="number" [(ngModel)]="product.price" />

    <label>Discount</label>
    <input type="number" [(ngModel)]="product.discount" />

    <label>Stock</label>
    <input type="number" [(ngModel)]="product.stock" />

    <label>Image URL</label>
    <input [(ngModel)]="product.image" />

    <!-- â­ IMAGE PREVIEW ADDED HERE â­ -->
   <label>Upload Image</label>
<input type="file" (change)="onFileSelected($event)" />

<label>OR Image URL</label>
<input [(ngModel)]="product.image" />

<!-- Image Preview -->
<div class="img-preview" *ngIf="product.image">
  <img [src]="product.image" alt="Preview">
</div>

    <button (click)="saveChanges()">Save</button>
    <button (click)="cancelEdit()">Cancel</button>

  </div>

</div>

